window.siugo=function(a){function b(){c(),d(),i(),e(),f(),h(),j()}function c(){var b=a(".fixed-height");b.height(l.height()),l.on("resize",function(){b.height(a(this).height())})}function d(){var b=a(".fixed-max-height");b.css("maxHeight",l.height()),l.on("resize",function(){b.css("maxHeight",a(this).height())})}function e(){var b=a("#btn-mobile-menu"),c=a("#btn-mobile-menu-close"),d=a("#main-navigation"),e=a(".bg-overlay",".main-header");b.on("click",function(a){a.preventDefault(),d.addClass("active"),e.addClass("active")}),c.on("click",function(a){a.preventDefault(),d.removeClass("active"),e.removeClass("active")}),e.on("click",function(a){a.preventDefault(),d.removeClass("active"),e.removeClass("active")}),l.on("resize",function(){a(this).width()>=k&&(d.removeClass("active"),e.removeClass("active"))})}function f(){var b=a("#form-alert"),c=a("#main-footer-form"),d=!0,e=function(){d=!0,c.find("input").removeClass("error"),c.find("textarea").removeClass("error"),b.addClass("hide"),b.find(".text").html(""),b.removeClass("alert-danger alert-success")},f=function(c,e){d=!1,a(c).addClass("error"),b.find(".text").html(e)};c.on("submit",function(c){if(c.preventDefault(),e(),a(this).find("input, textarea").each(function(){var b=a(this).val();""==b&&f(this,"Please fill out all fields")}),!d)return b.addClass("alert-danger").removeClass("hide"),!1;a(this).find('[type="email"]').each(function(){var c=a(this).val(),d=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return d.test(c)?void 0:(f(this,"Please enter a valid email"),b.addClass("alert-danger").removeClass("hide"),!1)});var g=function(a){"success"===a?(b.addClass("alert-success").removeClass("hide"),b.find(".text").html("Your message has been sent!")):(b.addClass("alert-danger").removeClass("hide"),b.find(".text").html("Sorry, there was an error sending your message. Please try again."),console.log(a))};a.ajax("/contact",{type:a(this).attr("method"),data:a(this).serialize(),error:g,success:g})})}function g(){a(".carousel").slick({slide:".carousel-item",dots:!1,arrows:!1,autoplay:!0,autoplaySpeed:2e3,fade:!0,pauseOnFocus:!1,pauseOnHover:!1})}function h(){var b={url:"https://api.flickr.com/services/rest/",format:"json",key:"924da085423f538b79de8be7ac96a73c",user_id:"136975320@N02",getSets:function(c){a.ajax({dataType:"json",url:b.url+"?method=flickr.photosets.getList&api_key="+b.key+"&format="+b.format+"&user_id="+b.user_id+"&nojsoncallback=1",success:function(a){c&&"function"==typeof c&&c(a.photosets.photoset)}})},getPhotos:function(c,d){a.ajax({dataType:"json",url:b.url+"?method=flickr.photosets.getPhotos&api_key="+b.key+"&format="+b.format+"&user_id="+b.user_id+"&photoset_id="+c+"&nojsoncallback=1",success:function(a){d&&"function"==typeof d&&d(a)}})}},c=[],d=function(a){return a.toLowerCase().replace(/ /g,"").replace(/&/,"-")},e=function(){var e=a.Deferred();return b.getSets(function(f){a.each(f,function(g,h){b.getPhotos(h.id,function(b){a.each(b.photoset.photo,function(g,h){var i="https://farm"+h.farm+".staticflickr.com/"+h.server+"/"+h.id+"_"+h.secret+".jpg",j="https://farm"+h.farm+".staticflickr.com/"+h.server+"/"+h.id+"_"+h.secret+"_h.jpg",k=d(b.photoset.title);if("featured"==b.photoset.title){var l='<div class="carousel-item"><img src="'+j+'" alt="Homepage Header image" /></div>';a(".section-hero .carousel").append(l)}else{-1==c.indexOf(b.photoset.title)&&c.push(b.photoset.title);var m='<div class="mix '+k+' portfolio-item" data-filter="'+k+'" data-order="'+g+'"><a href="'+j+'" data-lightbox="'+k+'" data-title="'+h.title+'"><div class="portfolio-img"><img data-original="'+i+'" alt="'+h.title+'" /></div><div class="portfolio-label"><i class="fa fa-search-plus"></i><div class="album">'+b.photoset.title+"</div></div></a></div>";a("#gallery-images").append(m)}c.length===f.length-1&&g===b.photoset.photo.length-1&&e.resolve()})})})}),e.promise()};e().done(function(){c.sort(),g(),a.each(c,function(b,c){var e=d(c);a("#portfolio-filters").append('<button type="button" class="btn filter" data-filter=".'+e+'">'+c+"</button>")}),a(".portfolio-img > img").lazyload({threshold:300}),a("#gallery-images").on("mixEnd",function(b,c){a(window).scroll()}).mixItUp({load:{sort:"filter:asc order:asc"}})})}function i(){var b=a("#main-navigation"),c=a(".bg-overlay",".main-header");a(".smooth-scroll").on("click",function(){return a("html, body").animate({scrollTop:a(a.attr(this,"href")).offset().top},500),a(this).parents("#main-navigation").length>0&&(b.removeClass("active"),c.removeClass("active")),!1})}function j(){a.ajax({dataType:"json",url:"/ratings",success:function(a){a&&200===a.status&&console.log(a.data)}})}var k=767,l=a(window);return{init:b}}(jQuery),$(function(){window.siugo.init()});